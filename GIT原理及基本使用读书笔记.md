## GIT原理及基本使用读书笔记

## 一．GIT原理

GIT的中文名为分布式版本控制系统，是一个软件管理器。GIT不仅有一个中心的服务器控制最新版本代码，而且每个开发者自己还有个本地仓库，所以在开发过程中都是先将代码提交到本地仓库再推送到中心服务器上的，这样的好处就是每个人都依赖于中心服务器来实现交互，但又不会被中心服务器限制，就算中心服务器挂了，也能很容易的找到最新版本的代码，而且我自己的工作依然可以顺利进行，提交到本地仓库。当中心服务器修复之后，再将自己仓库的东西推送到中心服务器。

要进行开发，提交代码和中心服务器进行交互，首先我们要有自己的一个开发基地，也就是我们自己的git仓库。拥有自己的git仓库的方式有两种，一就是在自己已有的目录里初始化自己的git仓库然后和中心服务器建立连接，更新最新代码到自己的git仓库。二就是将一个已经存在的项目克隆到自己的目录成为自己的git仓库。



|      |                                                              |
| ---- | ------------------------------------------------------------ |
|      | ![img](file:///C:\Users\LENOVO\AppData\Local\Temp\ksohtml25080\wps1.png) |

执行git init命令，就会创建并初始化git仓库，这个时候在该目录下会产生一个.git的隐藏文件夹，而该目录就是我们的工作目录，我们的一切行为都是在这个目录里，而这个.git文件夹就是我们的本地仓库，当我们进行了一些文件操作之后，认为可以提交了，那么首先我们就是提交到本地仓库也就是这个.git中，然后再推送到中心服务器。

git的工作总共分四层，其中三层是在git仓库，包括了工作目录，暂存区和本地仓库，工作目录就是我们执行命令git init时所在的地方，也就是我们执行一切文件操作的地方，暂存区和本地仓库都是在.git目录，因为它们只是用来存数据的。远程仓库在中心服务器，也就是我们做好工作之后推送到远程仓库，或者从远程仓库更新下来最新代码到我们的git仓库。

当我们在工作目录中进行文件操作后，要先添加到暂存区，然后再将暂存区中刚添加的文件快照提交到本地仓库，然后再将本地仓库的最新版本文件快照推送到远程仓库。这个文件快照其实就是各个文件的在被添加到暂存区时的状态，就和照相一样的，留下每个不同时刻的快照，方便以后查询，而git存储的就是这些一系列的快照。

## 二．GIT基本使用

合并两分支

合并之前先要commit当前分支的修改

将A分支修改合并到B分支切换到B分支：

git checkout B

合并A分支的所有更改： 

git checkout .

合并A分支的部分修改：

git checkout A a b c …

拉取远程分支到本地

git branch -a 查看分支（绿色为本地已有分支，红色为远程分支）

本地分支存在：

git pull 拉取的远程分支

本地分支不存在：

方法1：

git checkout -b dev（本地名） origin/dev（远程名） 拉取远程分支并在本地创建一个新的分支

使用该方式会在本地新建分支并自动切换到该本地分支，新建的本地分支会和远程分支建立映射关系

方法2：

git fetch origin 远程分支名x:本地分支名x

使用该方式会在本地新建分支x，但是不会自动切换到该本地分支x，需要手动checkout。采用此种方法建立的本地分支不会和远程分支建立映射关系。还需要：

git branch --set-upstream-to origin/newName

3，删除本地分支，删除远程分支

查看所有分支

git branch -a

查看当前分支

git branch

删除本地的A分支

git branch -d A

删除远程A分支

git push origin --delete A

4，修改分支名称

同步远程和本地代码

重命名远程分支对应的本地分支：

git branch -m oldName newName

删除远程分支

git push --delete origin oldName

上传新命名的本地分支到远程

git push origin newName

把修改后的本地分支与远程分支关联

git branch --set-upstream-to origin/newName

5，复制已有分支到新分支

同步已有分支的远程和本地代码

在已有分支上创建新分支（创建完成会自动调到新分支）

git checkout -b newName

新分支更新到远程

git push origin newName

关联本地和远程新分支

git branch --set-upstream-to origin/newName

6.连接多个远程仓库

1. git remote -- 查看连接的所有远程仓库

2. git remote add name xxx(远程仓库地址) -- 连接远程仓库，其中name是自己自定义的远程仓库的名称

3. git push -u name master -- 推送到远程仓库的master分支（-u表示设置默认推送仓库和分支）